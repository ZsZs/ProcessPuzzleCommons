<cruisecontrol>
   <property name="PRIVATE_REPOSITORIES_PATH" value="D:\ClearCaseViews\cruisecontrol_view" />
   <property name="PUBLIC_REPOSITORIES_PATH" value="D:\GitRepositories" />
   <property name="CCL_HOME" value="c:\Program Files\CruiseControl" />
   <property name="ANT_HOME" value="c:\apache-ant-1.8.2" />
   <property name="ANT_TASK_HOME" value="${PUBLIC_REPOSITORIES_PATH}\ProcessPuzzleCommons\Environment\ANT\AntTasks" />
   <property name="BUILD_PUZZLE_HOME" value="${PUBLIC_REPOSITORIES_PATH}\BuildPuzzle" />
   <property name="LITEST_HOME" value="${PUBLIC_REPOSITORIES_PATH}\LiTest" />
   <property name="PP_COMMONS_HOME" value="${PUBLIC_REPOSITORIES_PATH}\ProcessPuzzleCommons" />
   <property name="PP_FRAMEWORK_HOME" value="${PUBLIC_REPOSITORIES_PATH}\ProcessPuzzleFramework" />
   <property name="PP_UI_HOME" value="${PUBLIC_REPOSITORIES_PATH}\ProcessPuzzleUI" />
   
   <property file="${PP_COMMONS_HOME}\Deployment\BuildSnippets\common.build.properties" />
   
   <plugin name="htmlemail" 
      mailhost="smtp.gmail.com"
      username="processpuzzle@gmail.com"
      password="ProcessPuzzle4Ever"
      returnaddress="processpuzzle@gmail.com" 
      returnname="CruiseControl" 
      failasimportant="true"
      skipusers="false"
      subjectprefix="CruiseControl:" 
      xsldir="${CCL_HOME}/webapps/cruisecontrol/xsl/" 
      css="${CCL_HOME}/webapps/cruisecontrol/css/cruisecontrol.css">
      
      <always address="zsolt.zsuffa@gmail.com"/>
      <map alias="peter.krima" address="peter.krima@itkodex.hu" />
   </plugin>
   
   <plugin name="project">
      <property name="Project_Root_Directory" value="${PUBLIC_REPOSITORIES_PATH}/${project.name}/Implementation" />
      <property name="Project_Build_Directory" value="${Project_Root_Directory}/Build" />
      
      <property name="Project_Domain_Build_Directory" value="${Project_Root_Directory}/DomainTier/Build" />
      <property name="Project_Domain_Distribution_Directory" value="${Project_Domain_Build_Directory}/Distribution" />
      <property name="Project_Domain_Reports_Directory" value="${Project_Domain_Build_Directory}/Reports" />
      <property name="Project_Domain_FitNesse_Directory" value="${fitnesse.testresults.dir}/${project.name}.DocumentsAndTests.DomainLogic" />
      
      <property name="Project_Web_Build_Directory" value="${Project_Root_Directory}/WebTier/Build" />
      <property name="Project_Web_Distribution_Directory" value="${Project_Web_Build_Directory}/Distribution" />
      <property name="Project_Web_Reports_Directory" value="${Project_Web_Build_Directory}/Reports" />
      <property name="Project_Web_FitNesse_Directory" value="${fitnesse.testresults.dir}/${project.name}.DocumentsAndTests.UseCases" />

      <property file="${Project_Domain_Build_Directory}\component.properties"/>
      <property file="${Project_Web_Build_Directory}\component.properties" />
      
      <listeners>
         <currentbuildstatuslistener file="logs/${project.name}/status.txt"/>
      </listeners>

      <modificationset>
         <filesystem folder="${Project_Root_Directory}/DomainTier/"/>
         <filesystem folder="${Project_Root_Directory}/WebTier/"/>
      </modificationset>

      <bootstrappers>
         <gitbootstrapper localWorkingCopy="${Project_Root_Directory}" />
      </bootstrappers>

      <schedule interval="7200">
         <ant anthome="${ANT_HOME}" uselogger="true" usedebug="false" buildfile="${Project_Build_Directory}/build.xml" />
      </schedule>

      <log dir="logs/${project.name}">
         <merge file="${Project_Web_Reports_Directory}/JUnit/xml/TESTS-TestSuites.xml" />
         <merge file="${Project_Web_Reports_Directory}/JsUnit/xml/TESTS-TestSuites.xml" />
         <merge dir="${Project_Web_Reports_Directory}/Cobertura/reports"/>
         <merge dir="${Project_Web_Reports_Directory}" pattern="*-pmd.xml"/>
         <merge dir="${Project_Web_Reports_Directory}" pattern="*-fb.xml"/>
         <merge dir="${Project_Web_Reports_Directory}" pattern="*-pmd.html"/>
         <merge dir="${Project_Web_Reports_Directory}" pattern="*-fb.html"/>
         <merge file="${Project_Domain_Reports_Directory}/JUnit/xml/TESTS-TestSuites.xml" />
         <merge file="${Project_Domain_Reports_Directory}/JsUnit/xml/TESTS-TestSuites.xml" />
         <merge dir="${Project_Domain_Reports_Directory}/Cobertura/reports"/>
         <merge dir="${Project_Domain_Reports_Directory}" pattern="*-pmd.xml"/>
         <merge dir="${Project_Domain_Reports_Directory}" pattern="*-fb.xml"/>
         <merge dir="${Project_Domain_Reports_Directory}" pattern="*-pmd.html"/>
         <merge dir="${Project_Domain_Reports_Directory}" pattern="*-fb.html"/>
         <merge file="${fitnesse.testresults.file}"/>
      </log>

      <publishers>
         <artifactspublisher dir="${Project_Domain_Reports_Directory}/JUnit/html" dest="artifacts/${project.name}" subdirectory="JUnit/DomainTier" />
         <artifactspublisher dir="${Project_Domain_Reports_Directory}/JsUnit/html" dest="artifacts/${project.name}" subdirectory="JsUnit/DomainTier" />
         <artifactspublisher dir="${Project_Domain_FitNesse_Directory}" dest="artifacts/${project.name}" subdirectory="FitNesse/DomainTier"/>

         <artifactspublisher dir="${Project_Web_Reports_Directory}/JUnit/html" dest="artifacts/${project.name}" subdirectory="JUnit/WebTier" />
         <artifactspublisher dir="${Project_Web_Reports_Directory}/JsUnit/html" dest="artifacts/${project.name}" subdirectory="JsUnit/WebTier" />
         <artifactspublisher dir="${Project_Web_FitNesse_Directory}" dest="artifacts/${project.name}" subdirectory="FitNesse/WebTier"/>
            
         <onsuccess>
            <artifactspublisher dir="${Project_Domain_Distribution_Directory}" dest="artifacts/${project.name}" subdirectory="Distribution" />
            <artifactspublisher dir="${Project_Domain_Reports_Directory}/Cobertura/reports/cobertura-html" dest="artifacts/${project.name}" subdirectory="Cobertura/DomainTier" />
            <artifactspublisher dir="${Project_Domain_Reports_Directory}/PMD" dest="artifacts/${project.name}" subdirectory="PMD/DomainTier" />
            <artifactspublisher dir="${Project_Domain_Reports_Directory}/FindBugs" dest="artifacts/${project.name}" subdirectory="FindBugs/DomainTier" />
            
            <artifactspublisher dir="${Project_Web_Distribution_Directory}" dest="artifacts/${project.name}" subdirectory="Distribution" />
            <artifactspublisher dir="${Project_Web_Reports_Directory}/Cobertura/reports/cobertura-html" dest="artifacts/${project.name}" subdirectory="Cobertura/WebTier" />
            <artifactspublisher dir="${Project_Web_Reports_Directory}/PMD" dest="artifacts/${project.name}" subdirectory="PMD/WebTier" />
            <artifactspublisher dir="${Project_Web_Reports_Directory}/FindBugs" dest="artifacts/${project.name}" subdirectory="FindBugs/WebTier" />
         </onsuccess>
            
         <onfailure>
            <htmlemail>
               <map alias="peter.krima" address="peter.krima@itkodex.hu" />
            </htmlemail>
         </onfailure>
      </publishers>

   </plugin>
   
   <project name="ProcessPuzzleUI" />
   
</cruisecontrol>